@model IEnumerable<devmgr.Models.SYS_USER>
@using System.Linq;
@using devmgr.Models;
@{Model1 ef = new Model1(); }
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div class="navbar-collapse collapse">
    <ul class="nav navbar-nav">
        <li>@Html.ActionLink("用户管理", "Index", "SYS_USER")</li>
        <li>@Html.ActionLink("部门管理", "Index", "SYS_DEPART")</li>
        <li>@Html.ActionLink("模块管理", "Index", "SYS_MODULE")</li>
        <li>@Html.ActionLink("用户组管理", "Index", "SYS_USERTYPE")</li>
        <li>@Html.ActionLink("用户组&模块管理", "Index", "SYS_UTYPE_MODULE")</li>
    </ul>
</div>

    <h2>用户管理</h2>

    <p>
        @Html.ActionLink("添 加", "Create")
    </p>
    <table class="table">
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.code)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.cname)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.account_id)
            </th>
            @*<th>
                @Html.DisplayNameFor(model => model.pwd)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.birthdate)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.tel)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.email)
            </th>*@
            <th>
                @Html.DisplayNameFor(model => model.departid_fx)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.usertypeid_fx)
            </th>
            @*<th>
                @Html.DisplayNameFor(model => model.desc_text)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.remark)
            </th>*@
            <th>
                @Html.DisplayNameFor(model => model.whocreateid_fx)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.createdate)
            </th>
            <th></th>
        </tr>

        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.code)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.cname)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.account_id)
                </td>
                @*<td>
                    @Html.DisplayFor(modelItem => item.pwd)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.birthdate)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.tel)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.email)
                </td>*@
                <td>

                    @{ var obj = ef.SYS_DEPART.Where(item1 => item1.id == item.departid_fx); }
                    @if (obj.Count<SYS_DEPART>() > 0)
                    {
                            @Html.Label(obj.First<SYS_DEPART>().name.ToString())
                    }
                    else
                    {

                    }
                    
                </td>
                <td>
                    @*@Html.DisplayFor(modelItem => item.usertypeid_fx)*@
                    @{ var obj2 = ef.SYS_USERTYPE.Where(item1 => item1.id == item.usertypeid_fx); }
                    @if (obj2.Count<SYS_USERTYPE>() > 0)
                    {
                        @Html.Label(obj2.First<SYS_USERTYPE>().typename.ToString())
                    }
                    else
                    {

                    }
                </td>

                @*<td>
                    @Html.DisplayFor(modelItem => item.desc_text)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.remark)
                </td>*@
                <td>
                    @*@Html.DisplayFor(modelItem => item.whocreateid_fx)*@
                    @{ var obj3 = ef.SYS_USER.Where(item1 => item1.id == item.whocreateid_fx); }
                    @if (obj3.Count<SYS_USER>() > 0)
                    {
                        @Html.Label(obj3.First<SYS_USER>().cname.ToString())
                    }
                    else
                    {
                    }
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.createdate, "shortdatetime")
                </td>
                <td>
                    @Html.ActionLink("编辑", "Edit", new { id = item.id }) |
                    @Html.ActionLink("查看", "Details", new { id = item.id }) |
                    @Html.ActionLink("删除", "Delete", new { id = item.id })
                </td>
            </tr>
        }

    </table>
